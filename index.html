<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>DMI 작업표준서 호기 분류</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/assets/images/favicons/DMI-2.png">
    <link rel="shortcut icon" type="image/x-icon" href="/assets/images/favicons/DMI-2.png">
    <link href="/assets/css/styles.css" rel="stylesheet" />
</head>

<body>
    <div class="page">
        <svg width="1280" height="768" viewBox="0 0 1280 768" xmlns="http://www.w3.org/2000/svg" aria-label="DMI 작업표준서 호기 분류 도면">

        <!-- 상단 로고영역 (이미지 버전) -->
        <image 
            href="./assets/images/logo/DMI.png" 
            x="-15" 
            y="7" 
            width="230"
            height="130" 
            preserveAspectRatio="xMidYMid meet"
        />

        <!-- 상단 타이틀 바 -->
        <rect x="160" y="16" width="845" height="80" rx="1" fill="#5aa0e6"/>
        <text x="577.5" y="58" class="title mid" fill="#fff">작업표준서 호기 분류</text>

        <!-- 상단 첫번째 라인: R-1 ~ R-7 (왼쪽 블록) -->
        <!-- 1열 블록 크기 -->
        <!-- 유틸 함수가 없으니 좌표는 수작업으로 배치 -->
        <!-- 행1 -->
        <!-- R-2, R-4, R-5, R-6 -->
        <g>
        <!-- R-2 -->
        <rect x="18" y="122" width="55" height="28" class="blk"/>
        <text x="45.5" y="138" class="chip mid">R-2</text>
        <rect x="18" y="152" width="55" height="45" class="mv boxStroke cursor-pointer"/>
        <text x="45.5" y="175" class="label mid">MV</text>

        <!-- R-4 -->
        <rect x="78" y="122" width="55" height="28" class="blk"/>
        <text x="105.5" y="138" class="chip mid">R-4</text>
        <rect x="78" y="152" width="55" height="45" class="mv boxStroke cursor-pointer"/>
        <text x="105.5" y="175" class="label mid">MV</text>

        <!-- R-5 -->
        <rect x="148" y="122" width="55" height="28" class="blk"/>
        <text x="175.5" y="138" class="chip mid">R-5</text>
        <rect x="148" y="152" width="55" height="45" class="dl3 boxStroke cursor-pointer"/>
        <text x="175.5" y="175" class="label mid">DL3</text>

        <!-- R-6 -->
        <rect x="208" y="122" width="55" height="28" class="blk"/>
        <text x="235.5" y="138" class="chip mid">R-6</text>
        <rect x="208" y="152" width="55" height="45" class="dl3 boxStroke cursor-pointer"/>
        <text x="235.5" y="175" class="label mid">DL3</text>

        <!-- TIG -->
        <rect x="273" y="134" width="45" height="63" class="mv thinStroke"/>
        <text x="296" y="165" class="label mid tiny">TIG</text>

        <!-- CV 작동확인 2개 더미 -->
        <rect x="327" y="152" width="28" height="110" class="cv thinStroke pointer-events-none"/>
        <rect x="360" y="152" width="28" height="110" class="cv thinStroke pointer-events-none"/>
        <text x="341" y="205" class="label mid">CV</text>
        <text x="374" y="205" class="label mid">CV</text>

        <!-- R-7 -->
        <rect x="273" y="205" width="45" height="29" class="blk"/>
        <text x="295.5" y="221" class="chip mid">R-7</text>
        <rect x="273" y="236" width="45" height="45" class="mv boxStroke cursor-pointer"/>
        <text x="295.5" y="259" class="label mid">MV</text>
        </g>

        <!-- 좌측 하단 R-1, R-3 -->
        <g>
        <!-- R-1 -->
        <rect x="18" y="216" width="55" height="28" class="blk"/>
        <text x="45.5" y="232" class="chip mid">R-1</text>
        <rect x="18" y="246" width="55" height="45" class="mv boxStroke cursor-pointer"/>
        <text x="45.5" y="269" class="label mid">MV</text>

        <!-- R-3 -->
        <rect x="78" y="216" width="55" height="28" class="blk"/>
        <text x="105.5" y="232" class="chip mid">R-3</text>
        <rect x="78" y="246" width="55" height="45" class="mv boxStroke cursor-pointer"/>
        <text x="105.5" y="269" class="label mid">MV</text>
        </g>

        <!-- 중앙 상단 라인: R-9~R-25 -->
        <g>
        <!-- helper: startX=420 step=60 -->
        <!-- R-9 -->
        <rect x="405" y="122" width="55" height="28" class="blk"/>
        <text x="432.5" y="138" class="chip mid">R-9</text>
        <rect x="405" y="152" width="55" height="45" class="cv boxStroke cursor-pointer"/>
        <text x="432.5" y="175" class="label mid">CV</text>

        <!-- R-11 -->
        <rect x="465" y="122" width="55" height="28" class="blk"/>
        <text x="492.5" y="138" class="chip mid">R-11</text>
        <rect x="465" y="152" width="55" height="45" class="mv boxStroke cursor-pointer"/>
        <text x="492.5" y="175" class="label mid">MV</text>

        <!-- R-13 -->
        <rect x="525" y="122" width="55" height="28" class="blk"/>
        <text x="552.5" y="138" class="chip mid">R-13</text>
        <rect x="525" y="152" width="55" height="45" class="mv boxStroke cursor-pointer"/>
        <text x="552.5" y="175" class="label mid">MV</text>

        <!-- R-15 -->
        <rect x="585" y="122" width="55" height="28" class="blk"/>
        <text x="612.5" y="138" class="chip mid">R-15</text>
        <rect x="585" y="152" width="55" height="45" class="gn7 boxStroke cursor-pointer"/>
        <text x="612.5" y="175" class="label mid">GN7</text>

        <!-- R-17 -->
        <rect x="645" y="122" width="55" height="28" class="blk"/>
        <text x="672.5" y="138" class="chip mid">R-17</text>
        <rect x="645" y="152" width="55" height="45" class="dl3 boxStroke cursor-pointer"/>
        <text x="672.5" y="175" class="label mid">DL3</text>

        <!-- R-19 -->
        <rect x="705" y="122" width="55" height="28" class="blk"/>
        <text x="732.5" y="138" class="chip mid">R-19</text>
        <rect x="705" y="152" width="55" height="45" class="mq4 boxStroke cursor-pointer"/>
        <text x="732.5" y="175" class="label mid">MQ4</text>

        <!-- R-21 -->
        <rect x="765" y="122" width="55" height="28" class="blk"/>
        <text x="792.5" y="138" class="chip mid">R-21</text>
        <rect x="765" y="152" width="55" height="45" class="yb boxStroke cursor-pointer"/>
        <text x="792.5" y="175" class="label mid">YB</text>

        <!-- R-23 -->
        <rect x="825" y="122" width="55" height="28" class="blk"/>
        <text x="852.5" y="138" class="chip mid">R-23</text>
        <rect x="825" y="152" width="55" height="45" class="mq4 boxStroke cursor-pointer"/>
        <text x="852.5" y="175" class="label mid">MQ4</text>

        <!-- R-25 -->
        <rect x="885" y="122" width="55" height="28" class="blk"/>
        <text x="912.5" y="138" class="chip mid">R-25</text>
        <rect x="885" y="152" width="55" height="45" class="dl3 boxStroke cursor-pointer"/>
        <text x="912.5" y="175" class="label mid">DL3</text>

        <!-- R-43 -->
        <rect x="945" y="122" width="55" height="28" class="blk"/>
        <text x="972.5" y="138" class="chip mid">R-43</text>
        <rect x="945" y="152" width="55" height="45" class="dl3 boxStroke cursor-pointer"/>
        <text x="972.5" y="175" class="label mid">DL3</text>


        <!-- 상단 두번째 라인: R-8 ~ R-42 -->
        <!-- R-8 -->
        <rect x="405" y="216" width="55" height="28" class="blk"/>
        <text x="432.5" y="232" class="chip mid">R-8</text>
        <rect x="405" y="246" width="55" height="45" class="cv boxStroke cursor-pointer"/>
        <text x="432.5" y="269" class="label mid">CV</text>

        <!-- R-10 -->
        <rect x="465" y="216" width="55" height="28" class="blk"/>
        <text x="492.5" y="232" class="chip mid">R-10</text>
        <rect x="465" y="246" width="55" height="45" class="cv boxStroke cursor-pointer"/>
        <text x="492.5" y="269" class="label mid">CV</text>

        <!-- R-12 -->
        <rect x="525" y="216" width="55" height="28" class="blk"/>
        <text x="552.5" y="232" class="chip mid">R-12</text>
        <rect x="525" y="246" width="55" height="45" class="mv boxStroke cursor-pointer"/>
        <text x="552.5" y="269" class="label mid">MV</text>

        <!-- R-14 -->
        <rect x="585" y="216" width="55" height="28" class="blk"/>
        <text x="612.5" y="232" class="chip mid">R-14</text>
        <rect x="585" y="246" width="55" height="45" class="gn7 boxStroke cursor-pointer"/>
        <text x="612.5" y="269" class="label mid">GN7</text>

        <!-- R-16 -->
        <rect x="645" y="216" width="55" height="28" class="blk"/>
        <text x="672.5" y="232" class="chip mid">R-16</text>
        <rect x="645" y="246" width="55" height="45" class="sv boxStroke cursor-pointer"/>
        <text x="672.5" y="265" class="label mid">SV</text>
        <text x="672.5" y="278" class="label mid">DL3</text>

        <!-- R-18 -->
        <rect x="705" y="216" width="55" height="28" class="blk"/>
        <text x="732.5" y="232" class="chip mid">R-18</text>
        <rect x="705" y="246" width="55" height="45" class="dl3 boxStroke cursor-pointer"/>
        <text x="732.5" y="269" class="label mid">DL3</text>

        <!-- R-20 -->
        <rect x="765" y="216" width="55" height="28" class="blk"/>
        <text x="792.5" y="232" class="chip mid">R-20</text>
        <rect x="765" y="246" width="55" height="45" class="y4 boxStroke cursor-pointer"/>
        <text x="792.5" y="269" class="label mid">Y405</text>

        <!-- R-22 -->
        <rect x="825" y="216" width="55" height="28" class="blk"/>
        <text x="852.5" y="232" class="chip mid">R-22</text>
        <rect x="825" y="246" width="55" height="45" class="yb boxStroke cursor-pointer"/>
        <text x="852.5" y="269" class="label mid">YB</text>

        <!-- R-24 -->
        <rect x="885" y="216" width="55" height="28" class="blk"/>
        <text x="912.5" y="232" class="chip mid">R-24</text>
        <rect x="885" y="246" width="55" height="45" class="mq4 boxStroke cursor-pointer"/>
        <text x="912.5" y="269" class="label mid">MQ4</text>

        <!-- R-42 -->
        <rect x="945" y="216" width="55" height="28" class="blk"/>
        <text x="972.5" y="232" class="chip mid">R-42</text>
        <rect x="945" y="246" width="55" height="45" class="gn7 boxStroke cursor-pointer"/>
        <text x="972.5" y="269" class="label mid">GN7</text>
        </g>

        <!-- 노란 롤바(컨베이어) -->
        <rect x="18" y="306" width="982.5" height="18" rx="0" fill="#ffbf24" stroke="#d39a11" />

        <!-- 하단 좌측 군: R-44 ~ R-33 -->
        <g>
        <!-- 첫줄 R-44,R-26,R-28,R-30,R-32 -->
        <g>
            <!-- R-44 -->
            <rect x="70" y="352" width="55" height="28" class="blk"/>
            <text x="97.5" y="370" class="chip mid">R-44</text>
            <rect x="70" y="382" width="55" height="45" class="mv boxStroke cursor-pointer"/>
            <text x="97.5" y="405" class="label mid">MV</text>

            <!-- R-26 -->
            <rect x="130" y="352" width="55" height="28" class="blk"/>
            <text x="157.5" y="370" class="chip mid">R-26</text>
            <rect x="130" y="382" width="55" height="45" class="mv boxStroke cursor-pointer"/>
            <text x="157.5" y="405" class="label mid">MV</text>

            <!-- R-28 -->
            <rect x="190" y="352" width="55" height="28" class="blk"/>
            <text x="217.5" y="370" class="chip mid">R-28</text>
            <rect x="190" y="382" width="55" height="45" class="cv boxStroke cursor-pointer"/>
            <text x="217.5" y="401" class="label mid">SV/MQ</text>
            <text x="217.5" y="417" class="label mid">4</text>

            <!-- R-30 -->
            <rect x="250" y="352" width="55" height="28" class="blk"/>
            <text x="277.5" y="370" class="chip mid">R-30</text>
            <rect x="250" y="382" width="55" height="45" class="cv boxStroke cursor-pointer"/>
            <text x="277.5" y="405" class="label mid tiny">CT/SV</text>

            <!-- R-32 -->
            <rect x="310" y="352" width="55" height="28" class="blk"/>
            <text x="337.5" y="370" class="chip mid">R-32</text>
            <rect x="310" y="382" width="55" height="45" class="cv boxStroke cursor-pointer"/>
            <text x="337.5" y="405" class="label mid tiny">SV/CT/TK</text>
        </g>

        <!-- 둘째줄 R-45,R-27,R-29,R-31,R-33 -->
        <g>
            <!-- R-45 -->
            <rect x="70" y="430" width="55" height="28" class="blk"/>
            <text x="97.5" y="448" class="chip mid">R-45</text>
            <rect x="70" y="460" width="55" height="45" class="mv boxStroke cursor-pointer"/>
            <text x="97.5" y="483" class="label mid">MV</text>

            <!-- R-27 -->
            <rect x="130" y="430" width="55" height="28" class="blk"/>
            <text x="157.5" y="448" class="chip mid">R-27</text>
            <rect x="130" y="460" width="55" height="45" class="mv boxStroke cursor-pointer"/>
            <text x="157.5" y="483" class="label mid">MV</text>

            <!-- R-29 -->
            <rect x="190" y="430" width="55" height="28" class="blk"/>
            <text x="217.5" y="448" class="chip mid">R-29</text>
            <rect x="190" y="460" width="55" height="45" class="tk boxStroke cursor-pointer"/>
            <text x="217.5" y="483" class="label mid">TK</text>

            <!-- R-31 -->
            <rect x="250" y="430" width="55" height="28" class="blk"/>
            <text x="277.5" y="448" class="chip mid">R-31</text>
            <rect x="250" y="460" width="55" height="45" class="sv boxStroke cursor-pointer"/>
            <text x="277.5" y="483" class="label mid">SV</text>

            <!-- R-33 -->
            <rect x="310" y="430" width="55" height="28" class="blk"/>
            <text x="337.5" y="448" class="chip mid">R-33</text>
            <rect x="310" y="460" width="55" height="45" class="sv boxStroke cursor-pointer"/>
            <text x="337.5" y="483" class="label mid">SV</text>
        </g>

        <!-- 중앙 큰 박스 -->
        <rect x="391" y="360" width="240" height="140" class="wht fatStroke" />
        <text x="511" y="431" class="caption mid">완성품검사장</text>

        <!-- 우측 상자군 -->
        <g>
            <!-- 위 라인 -->
            <g>
                <!-- R-34 -->
                <rect x="660" y="352" width="55" height="28" class="blk"/>
                <text x="687.5" y="370" class="chip mid">R-34</text>
                <rect x="660" y="382" width="55" height="45" class="mq4 boxStroke cursor-pointer"/>
                <text x="687.5" y="405" class="label mid">MQ4</text>

                <!-- R-36 -->
                <rect x="720" y="352" width="55" height="28" class="blk"/>
                <text x="747.5" y="370" class="chip mid">R-36</text>
                <rect x="720" y="382" width="55" height="45" class="y4 boxStroke cursor-pointer"/>
                <text x="747.5" y="405" class="label mid">Y400</text>

                <!-- R-38 -->
                <rect x="780" y="352" width="55" height="28" class="blk"/>
                <text x="807.5" y="370" class="chip mid">R-38</text>
                <rect x="780" y="382" width="55" height="45" class="yb boxStroke cursor-pointer"/>
                <text x="807.5" y="405" class="label mid">YB</text>

                <!-- R-40 -->
                <rect x="840" y="352" width="55" height="28" class="blk"/>
                <text x="867.5" y="370" class="chip mid">R-40</text>
                <rect x="840" y="382" width="55" height="45" class="y4 boxStroke cursor-pointer"/>
                <text x="867.5" y="405" class="label mid">Y400</text>
            </g>

            <!-- 아래 라인 -->
            <g>
                <!-- R-35 -->
                <rect x="660" y="430" width="55" height="28" class="blk"/>
                <text x="687.5" y="448" class="chip mid">R-35</text>
                <rect x="660" y="460" width="55" height="45" class="dl3 boxStroke cursor-pointer"/>
                <text x="687.5" y="483" class="label mid">DL3</text>

                <!-- R-37 -->
                <rect x="720" y="430" width="55" height="28" class="blk"/>
                <text x="747.5" y="448" class="chip mid">R-37</text>
                <rect x="720" y="460" width="55" height="45" class="y4 boxStroke cursor-pointer"/>
                <text x="747.5" y="483" class="label mid">Y400</text>

                <!-- R-39 -->
                <rect x="780" y="430" width="55" height="28" class="blk"/>
                <text x="807.5" y="448" class="chip mid">R-39</text>
                <rect x="780" y="460" width="55" height="45" class="yb boxStroke cursor-pointer"/>
                <text x="807.5" y="483" class="label mid">YB</text>

                <!-- R-41 -->
                <rect x="840" y="430" width="55" height="28" class="blk"/>
                <text x="867.5" y="448" class="chip mid">R-41</text>
                <rect x="840" y="460" width="55" height="45" class="mv boxStroke cursor-pointer"/>
                <text x="867.5" y="483" class="label mid">MV</text>
            </g>
        </g>

        </g>

        <!-- 우측 '개발전용' 표지 + MV -->
        <g>
            <rect x="922" y="388" width="75" height="6" fill="#0db37d"/>
            <rect x="925" y="407" width="6" height="90" fill="#0db37d"/>
            <rect x="942" y="419" width="48" height="28" class="blk"/>
            <text x="966" y="434" class="chip mid fs-12px">개발전용</text>
            <rect x="942" y="450" width="48" height="55" class="mv boxStroke pointer-events-none"/>
            <text x="966.5" y="478" class="label mid">MV</text>
        </g>

        </svg>
    </div>

    <script>
        // === 접속 게이트: admin 또는 호기번호(1~45) ===
        (function authGate() {
        // index.html에서만 동작시키고 싶다면 필요시 조건 추가:
        // if (!/\/(index\.html)?$/.test(location.pathname)) return;

        // 이미 admin 인증됐으면 패스
        if (sessionStorage.getItem('dmi_auth') === 'admin') return;

        // 프롬프트 루프
        function ask() {
            const input = prompt(
            '접속 암호 또는 호기 번호(1~45)를 입력하세요.\n' +
            '- 관리자: admin\n' +
            '- 예: 15 또는 R-15'
            );
            if (input === null) {
            // 사용자가 취소한 경우: 안전하게 첫 화면 유지(원하면 재요청)
            return;
            }

            const parsed = parseAuth(input);
            if (!parsed) {
            alert('입력이 올바르지 않습니다. 다시 시도하세요.');
            ask(); // 재시도
            return;
            }

            if (parsed.mode === 'admin') {
            sessionStorage.setItem('dmi_auth', 'admin'); // 이번 세션 동안 index 접근 허용
            return; // index 그대로 표시
            }

            if (parsed.mode === 'unit') {
            const url = new URL(`/work-standards/${encodeURIComponent(parsed.unit)}`, location.origin);
            // 뒤로 가기 시 다시 게이트 안 뜨게 replace 권장
            location.replace(url.toString());
            return;
            }
        }

        // 입력 해석기: admin / R-숫자 / 숫자
        function parseAuth(raw) {
            const s = String(raw).trim().toUpperCase();

            if (s === 'ADMIN') return { mode: 'admin' };

            // R-15, R 15, r15 등
            let m = s.match(/^R[\s\-]?(\d{1,2})$/i);
            if (!m) {
            // 15 같은 순수 숫자
            m = s.match(/^(\d{1,2})$/);
            }
            if (m) {
            const n = parseInt(m[1], 10);
            if (n >= 1 && n <= 45) {
                return { mode: 'unit', unit: `R-${n}` };
            }
            }
            return null;
        }

        ask();
        })();
    </script>

    <script>
        // 브라우저 콘솔이나 Node.js에서 실행
        const scale = 1280/1020; // 1.255
        document.querySelectorAll("rect, text").forEach(el=>{
            ["x","y","width","height"].forEach(attr=>{
                if(el.hasAttribute(attr)){
                let v = parseFloat(el.getAttribute(attr));
                if(!isNaN(v)){
                    el.setAttribute(attr, (v*scale).toFixed(2));
                }
                }
            });
        });
    </script>
    <script src="/assets/js/equipment-navigator.js"></script>
</body>
</html>
